<!DOCTYPE html>
<html lang="en">

<head>
	<title>MoePhoto 系统信息</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="" />
	<script type="application/x-javascript">
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- Custom Theme files -->
	<link href="static/css/bootstrap.css" type="text/css" rel="stylesheet" media="all">
	<link href="static/css/style.css" type="text/css" rel="stylesheet" media="all">
	<link href="static/css/font-awesome.css" rel="stylesheet">
	<link href="static/css/loader.css" rel="stylesheet">
	<link href="static/css/component.css" rel="stylesheet">
	<!-- font-awesome icons -->
	<!-- //Custom Theme files -->
	<!-- web-fonts -->
	<link href="http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:200,300,400,700" rel="stylesheet">
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic'
	 rel='stylesheet' type='text/css'>
	<!-- //web-fonts -->
</head>

<body>
	<!-- banner -->
	{% autoescape true %} {{header| safe}} {% endautoescape %}
	<!-- //banner -->
	<!-- about -->
	<div class="about agileinfo">
		<div class="container">
			<h3 class="agileits-title">系统信息</h3>
			<div class="col-sm-6 about-w3right">
				<img src="static/images/img5.jpg" alt="" />
			</div>
			<div class="col-sm-6 about-w3left">
				<h4>Moe Photo Image Toolbox
					<br> 系统状态</h4>
				<p> CPU物理核心:{{cpu_count_phy}} </p>
				<p> CPU逻辑核心:{{cpu_count_log}} </p>
				<p> CPU频率:{{cpu_freq}} MHz</p>
				<p> 系统总内存:{{mem_total}} MB</p>
				<p> 系统空闲内存:{{mem_free}} MB</p>
				<p> 总工作硬盘空间:{{disk_total}} MB</p>
				<p> 可用工作硬盘空间:{{disk_free}} MB</p>
				<p> Python版本:{{python}}</p>
				<p> PyTorch版本:{{torch}}</p>
				<ul>
					{% for gpu in gpus %}
					<li>
						<p> 显卡型号:{{gpu['name']}}</p>
						<p> 显卡CUDA能力:{{gpu['capability']}}</p>
						<p> 处理器数量:{{gpu['total_memory']}}</p>
						<p> 总显存:{{gpu['total_memory']}} MB</p>
						<p> 空余显存:<span class="freeGPUMemory"></span> MB</p>
					</li>
					{% endfor %}
				</ul>
			</div>
			<div class="clearfix"> </div>
		</div>
	</div>
	<!-- //about -->
	<div class="container" id="progress">
		<p><span class="message"></span><span class="time"></span></p>
		<meter class="progress-bar" value=0 max=100></meter>
		<div class="col-md-12">
			<br>
		</div>
	</div>
	<!-- footer start here -->
	{% autoescape true %} {{footer| safe}} {% endautoescape %}
	<!-- //footer end here -->
	<!-- js -->
	<script src="static/js/jquery.js"></script>
	<script src="static/js/jarallax.js"></script>
	<script src="static/js/SmoothScroll.min.js"></script>
	<script type="text/javascript ">
		/* init Jarallax */
		$('.jarallax').jarallax({
			speed: 0.5,
			imgWidth: 1366,
			imgHeight: 768
		})
	</script>
	<!-- //js -->
	<!-- text Ticker -->
	<script type="text/javascript " src="static/js/jquery.totemticker.js"></script>
	<script type="text/javascript ">
		$(function () {
			$('#vertical-ticker').totemticker({
				row_height: '100px',
				next: '#ticker-next',
				previous: '#ticker-previous',
				stop: '#stop',
				start: '#start',
				mousestop: true
			});
		});
	</script>
	<!-- //text Ticker -->
	<!-- start-smooth-scrolling -->
	<script type="text/javascript " src="static/js/move-top.js"></script>
	<script type="text/javascript " src="static/js/easing.js"></script>
	<script type="text/javascript ">
		jQuery(document).ready(function ($) {
			$(".scroll ").click(function (event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop: $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<!-- //end-smooth-scrolling -->
	<!-- smooth-scrolling-of-move-up -->
	<script type="text/javascript ">
		$(document).ready(function () {
			$().UItoTop({
				easingType: 'easeOutQuart'
			});

		});
	</script>
	<!-- //smooth-scrolling-of-move-up -->
	<!-- Progressive-Effects-Animation-JavaScript -->
	<script type="text/javascript " src="static/js/numscroller-1.0.js"></script>
	<!-- //Progressive-Effects-Animation-JavaScript -->
	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="static/js/bootstrap.js"></script>
	<script src="static/js/custom-file-input.js"></script>
	<script src="static/js/message.js"></script>
	<script src="static/js/progress.js"></script>
	<script>
		$(document).ready(_ => {
			var progress = bindMessager('/msg', $('#progress'))
			var session = progress.messager.session, GPUfrees = $('.freeGPUMemory')
			session && $.ajax({
				url: '/systemInfo',
				data: { session },
				cache: false,
				dataType: 'json',
				beforeSend: _ => progress.begin('正在处理您的任务'),
				success: res => {
					freeMems = res.result
					progress.final('空闲中')
					GPUfrees.each((i, elem) => elem.innerHTML = freeMems[i])
				},
				error: (xhr, status, error) => {
					console.error(xhr, status, error)
					progress.final('出错啦')
				}
			})
		})
	</script>
</body>

</html>